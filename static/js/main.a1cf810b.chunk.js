(this["webpackJsonploft-taxi"]=this["webpackJsonploft-taxi"]||[]).push([[0],{69:function(e,t,r){},70:function(e,t,r){},72:function(e,t,r){},73:function(e,t,r){},74:function(e,t,r){},75:function(e,t,r){},76:function(e,t,r){},77:function(e,t,r){},78:function(e,t,r){},79:function(e,t,r){},80:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r(0),c=r.n(n),s=r(35),o=r.n(s),i=r(28),u=r(96),l=r(18),d=r(9),p=r(24),m="LOG_IN",j="LOG_IN_ERROR",b="LOG_OUT",h="AUTHENTICATE",f="CHECKIN",O="SET_CARD",x="SET_CARD_SUCCESS",v="GET_CARD",g="GET_CARD_SUCCESS",N="GET_ADDRESS",y="GET_ADDRESS_SUCCESS",_="GET_ROUTE",k="GET_ROUTE_SUCCESS",w=function(e){return{type:m,payload:e}},C=function(){return{type:b}},S=function(e){return{type:v,payload:{token:e}}},D=function(e){return{type:g,payload:{cardNumber:e.cardNumber,expiryDate:e.expiryDate,cardName:e.cardName,cvc:e.cvc}}},I=function(e){return{type:y,payload:{addresses:e.addresses}}},L=function(e){return{type:k,payload:{route:e}}},E={isLoggedIn:!!window.localStorage.getItem("state")&&JSON.parse(window.localStorage.getItem("state")).isLoggedIn,token:window.localStorage.getItem("state")?JSON.parse(window.localStorage.getItem("state")).token:""},R={cardNumber:"",expiryDate:"",cardName:"",cvc:""},T={addresses:[]},A={route:[]},q=Object(p.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return window.localStorage.setItem("state",JSON.stringify({isLoggedIn:!0,token:t.payload})),{isLoggedIn:!0,token:t.payload,error:""};case j:return{isLoggedIn:!1,token:"",error:t.payload};case b:return window.localStorage.removeItem("state"),{isLoggedIn:!1,token:"",error:""};default:return e}},card:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return e;case g:return{cardNumber:t.payload.cardNumber,expiryDate:t.payload.expiryDate,cardName:t.payload.cardName,cvc:t.payload.cvc};case b:return{cardNumber:"",expiryDate:"",cardName:"",cvc:""};default:return e}},addresses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{addresses:t.payload.addresses};case b:return{addresses:[]};default:return e}},route:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return{route:t.payload.route};case b:return{route:[]};default:return e}}}),G=r(57),F=r(4),M=r.n(F),U=r(8),J=r(17),B=function(){var e=Object(J.a)(M.a.mark((function e(t,r){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/auth",{method:"POST",body:JSON.stringify({email:t,password:r}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Z=function(){var e=Object(J.a)(M.a.mark((function e(t,r,a,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/register",{method:"POST",body:JSON.stringify({email:t,password:n,name:r,surname:a}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e.token})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(J.a)(M.a.mark((function e(t,r,a,n,c){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/card",{method:"POST",body:JSON.stringify({cardNumber:t,expiryDate:r,cardName:a,cvc:n,token:c}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e.success})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,a,n,c){return e.apply(this,arguments)}}(),V=function(){var e=Object(J.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/card?token=".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(J.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/addressList").then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(J.a)(M.a.mark((function e(t,r){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/route?address1=".concat(t,"&address2=").concat(r)).then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),W=M.a.mark($),X=M.a.mark(K);function $(e){var t,r,a,n;return M.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.email,a=t.password,c.next=3,Object(U.a)(B,r,a);case 3:if(!(n=c.sent).token){c.next=9;break}return c.next=7,Object(U.b)(w(n.token));case 7:c.next=11;break;case 9:return c.next=11,Object(U.b)((s=n.error,{type:j,payload:s}));case 11:case"end":return c.stop()}var s}),W)}function K(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.c)(h,$);case 2:case"end":return e.stop()}}),X)}var Y=M.a.mark(ee),Q=M.a.mark(te);function ee(e){var t,r,a,n,c,s;return M.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.email,a=t.firstName,n=t.lastName,c=t.password,o.next=3,Object(U.a)(Z,r,a,n,c);case 3:if(!(s=o.sent)){o.next=7;break}return o.next=7,Object(U.b)(w(s));case 7:case"end":return o.stop()}}),Y)}function te(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.c)(f,ee);case 2:case"end":return e.stop()}}),Q)}var re=M.a.mark(ce),ae=M.a.mark(se),ne=M.a.mark(oe);function ce(e){var t,r,a,n,c,s;return M.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.cardNumber,a=t.expiryDate,n=t.cardName,c=t.cvc,s=t.token,o.next=3,Object(U.a)(H,r,a,n,c,s);case 3:if(!o.sent){o.next=9;break}return o.next=7,Object(U.b)({type:x});case 7:return o.next=9,Object(U.b)(S(s));case 9:case"end":return o.stop()}}),re)}function se(e){var t,r;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.token,a.next=3,Object(U.a)(V,t);case 3:if(!(r=a.sent)){a.next=7;break}return a.next=7,Object(U.b)(D(r));case 7:case"end":return a.stop()}}),ae)}function oe(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.c)(O,ce);case 2:return e.next=4,Object(U.c)(v,se);case 4:case"end":return e.stop()}}),ne)}var ie=M.a.mark(le),ue=M.a.mark(de);function le(e){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.a)(z);case 2:if(!(t=e.sent)){e.next=6;break}return e.next=6,Object(U.b)(I(t));case 6:case"end":return e.stop()}}),ie)}function de(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.c)(N,le);case 2:case"end":return e.stop()}}),ue)}var pe=M.a.mark(je),me=M.a.mark(be);function je(e){var t,r,a,n;return M.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.address1,a=t.address2,c.next=3,Object(U.a)(P,r,a);case 3:if(!(n=c.sent)){c.next=7;break}return c.next=7,Object(U.b)(L(n));case 7:case"end":return c.stop()}}),pe)}function be(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.c)(_,je);case 2:case"end":return e.stop()}}),me)}var he=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,fe=Object(G.a)(),Oe=Object(p.e)(q,he(Object(p.a)(fe)));fe.run(K),fe.run(te),fe.run(oe),fe.run(de),fe.run(be);var xe=r(11),ve=r(12),ge=r(14),Ne=r(13),ye=r(31),_e=r(58),ke=r(10),we=(r(69),r.p+"static/media/logo.9f1f5bc1.svg"),Ce=(r(70),r(30)),Se=r(98),De=r(97),Ie=function(e){var t=e.useDispatchHook,r=(void 0===t?d.c:t)(),n=Object(Ce.a)({mode:"onBlur",reValidateMode:"onBlur"}),c=n.register,s=n.handleSubmit,o=n.errors;return Object(a.jsxs)("form",{onSubmit:s((function(e){var t=e.email,a=e.password;r(function(e,t){return{type:h,payload:{email:e,password:t}}}(t,a))})),className:"login",children:[Object(a.jsxs)(Se.a,{className:"login__label",children:["\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",Object(a.jsx)(De.a,{inputRef:c({required:{value:!0,message:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 email"}}),className:"login__input",type:"text",name:"email"}),o.email&&Object(a.jsx)("p",{className:"form-error",children:o.email.message})]}),Object(a.jsxs)(Se.a,{className:"login__label",children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(a.jsx)(De.a,{inputRef:c({required:!0}),className:"login__input",type:"password",name:"password"}),o.password&&Object(a.jsx)("p",{className:"form-error",children:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d"})]}),Object(a.jsx)("button",{type:"submit",className:"login__button",children:"\u0412\u043e\u0439\u0442\u0438"})]})},Le=function(e){Object(ge.a)(r,e);var t=Object(Ne.a)(r);function r(){return Object(xe.a)(this,r),t.apply(this,arguments)}return Object(ve.a)(r,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"form login-form",children:[this.props.isLoggedIn&&Object(a.jsx)(ke.a,{to:"/map"}),Object(a.jsx)("h2",{children:"\u0412\u043e\u0439\u0442\u0438"}),"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?  ",Object(a.jsx)(l.b,{to:"/checkin",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c"}),this.props.error&&Object(a.jsx)("p",{className:"form-error",style:{marginTop:"15px",marginBottom:"-20px"},children:this.props.error}),Object(a.jsx)(Ie,{})]})}}]),r}(n.Component),Ee=Object(d.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,error:e.auth.error}}),{})(Le),Re=(r(72),function(e){var t=e.useDispatchHook,r=(void 0===t?d.c:t)(),n=Object(Ce.a)({mode:"onBlur",reValidateMode:"onBlur"}),c=n.register,s=n.handleSubmit,o=n.errors;return Object(a.jsxs)("form",{onSubmit:s((function(e){var t=e.email,a=e.firstName,n=e.lastName,c=e.password;r(function(e,t,r,a){return{type:f,payload:{email:e,firstName:t,lastName:r,password:a}}}(t,a,n,c))})),className:"checkin",children:[Object(a.jsxs)(Se.a,{className:"checkin__label",children:["\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b",Object(a.jsx)(De.a,{inputRef:c({required:{value:!0,message:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 email"}}),className:"checkin__input",type:"text",name:"email"}),o.email&&Object(a.jsx)("p",{className:"form-error",children:o.email.message})]}),Object(a.jsxs)("div",{className:"inlineInputs",children:[Object(a.jsxs)(Se.a,{className:"checkin__label",style:{width:"48%"},children:["\u0418\u043c\u044f",Object(a.jsx)(De.a,{inputRef:c({required:!0}),className:"checkin__input",type:"text",name:"firstName"}),o.firstName&&Object(a.jsx)("p",{className:"form-error",children:"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"})]}),Object(a.jsxs)(Se.a,{className:"checkin__label",style:{width:"48%"},children:["\u0424\u0430\u043c\u0438\u043b\u0438\u044f",Object(a.jsx)(De.a,{inputRef:c({required:!0}),className:"checkin__input",type:"text",name:"lastName"}),o.lastName&&Object(a.jsx)("p",{className:"form-error",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430"})]})]}),Object(a.jsxs)(Se.a,{className:"checkin__label",children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(a.jsx)(De.a,{inputRef:c({required:!0}),className:"checkin__input",type:"password",name:"password"}),o.password&&Object(a.jsx)("p",{className:"form-error",children:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d"})]}),Object(a.jsx)("button",{type:"submit",className:"checkin__button",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})}),Te=function(e){Object(ge.a)(r,e);var t=Object(Ne.a)(r);function r(){return Object(xe.a)(this,r),t.apply(this,arguments)}return Object(ve.a)(r,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"form checkin-form",children:[this.props.isLoggedIn&&Object(a.jsx)(ke.a,{to:"/map"}),Object(a.jsx)("h2",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d?  ",Object(a.jsx)(l.b,{to:"/",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(a.jsx)(Re,{})]})}}]),r}(n.Component),Ae=Object(d.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}),{})(Te),qe=r(49),Ge=r.n(qe),Fe=(r(73),r(74),function(e){Object(ge.a)(r,e);var t=Object(Ne.a)(r);function r(){var e;Object(xe.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).unauthenticate=function(){e.props.logOut()},e}return Object(ve.a)(r,[{key:"render",value:function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsxs)("div",{className:"header__content",children:[Object(a.jsx)(i.Logo,{}),Object(a.jsx)("nav",{className:"header__nav",children:Object(a.jsxs)("ul",{className:"header__nav-list",children:[Object(a.jsx)("li",{className:"header__nav-list-item",children:Object(a.jsx)(l.b,{to:"/map",className:"header__nav-list-item-link",children:"\u041a\u0430\u0440\u0442\u0430"})}),Object(a.jsx)("li",{className:"header__nav-list-item",children:Object(a.jsx)(l.b,{to:"/profile",className:"header__nav-list-item-link",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(a.jsx)("li",{className:"header__nav-list-item",children:Object(a.jsx)(l.b,{to:"/",onClick:this.unauthenticate,className:"header__nav-list-item-link",children:"\u0412\u044b\u0439\u0442\u0438"})})]})})]})})}}]),r}(n.Component)),Me=Object(d.b)(null,{logOut:C})(Fe),Ue=(r(75),function(e){Object(ge.a)(r,e);var t=Object(Ne.a)(r);function r(){return Object(xe.a)(this,r),t.apply(this,arguments)}return Object(ve.a)(r,[{key:"render",value:function(){return Object(a.jsxs)("form",{className:"form nocard",children:[Object(a.jsx)("h3",{className:"nocard__title",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(a.jsx)("h4",{className:"nocard__subtitle",children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043a\u0430\u0440\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437."}),Object(a.jsx)(l.b,{to:"/profile",className:"nocard__button-link",children:Object(a.jsx)("button",{className:"nocard__button",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})})]})}}]),r}(n.Component)),Je=(r(76),function(e){Object(ge.a)(r,e);var t=Object(Ne.a)(r);function r(){var e;Object(xe.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).handleClick=function(t){t.preventDefault(),e.props.makeOrder(!1)},e}return Object(ve.a)(r,[{key:"render",value:function(){return Object(a.jsxs)("form",{className:"form nocard",children:[Object(a.jsx)("h3",{className:"nocard__title",children:"\u0417\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d"}),Object(a.jsx)("button",{className:"nocard__button",onClick:this.handleClick,children:"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"})]})}}]),r}(n.Component)),Be=(r(77),function(e){Object(ge.a)(r,e);var t=Object(Ne.a)(r);function r(){var e;Object(xe.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={src:"",dest:""},e.getRoute=function(t){t.preventDefault();var r=t.target,a=r.src,n=r.dest;e.props.getRoute(a.value,n.value),e.props.makeOrder(!0)},e}return Object(ve.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.src,n=t.dest,c=this.props.addresses;return Object(a.jsx)("div",{className:"form orderForm-form",children:Object(a.jsxs)("form",{onSubmit:this.getRoute,className:"orderForm",children:[Object(a.jsxs)(Se.a,{className:"orderForm__label",children:["\u041e\u0442\u043a\u0443\u0434\u0430:",Object(a.jsxs)("select",{className:"orderForm__input",name:"src",value:r,onChange:function(t){return e.setState({src:t.target.value})},children:[Object(a.jsx)("option",{default:!0,disabled:!0},"default"),c.map((function(t){return t!==e.state.dest&&Object(a.jsx)("option",{children:t},t)}))]})]}),Object(a.jsxs)(Se.a,{className:"orderForm__label",children:["\u041a\u0443\u0434\u0430:",Object(a.jsxs)("select",{className:"orderForm__input",name:"dest",value:n,onChange:function(t){return e.setState({dest:t.target.value})},children:[Object(a.jsx)("option",{default:!0,disabled:!0},"default"),c.map((function(t){return t!==e.state.src&&Object(a.jsx)("option",{children:t},t)}))]})]}),Object(a.jsx)("button",{type:"submit",className:"orderForm__button",children:"\u0412\u044b\u0437\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438"})]})})}}]),r}(n.Component)),Ze=Object(d.b)((function(e){return{addresses:e.addresses.addresses}}),{getRoute:function(e,t){return{type:_,payload:{address1:e,address2:t}}}})(Be);Ge.a.accessToken="pk.eyJ1IjoicHlhdHlraGluYSIsImEiOiJja2h6MDF6NjgybGZxMnBrejI0NWFpZ2tpIn0.AG-o6CiLmJ9ssaWs0tLSZA";var He=function(e,t){e.getLayer("route")&&e.removeLayer("route").removeSource("route"),t&&(e.flyTo({center:t[0],zoom:13}),e.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ffc617","line-width":8}}))},Ve=function(e){Object(ge.a)(r,e);var t=Object(Ne.a)(r);function r(e){var a;return Object(xe.a)(this,r),(a=t.call(this,e)).state={makeOrder:!1},a.makeOrder=function(e){a.setState({makeOrder:e}),!1===e&&He(a.map,[])},a.map=null,a.mapContainer=c.a.createRef(),a}return Object(ve.a)(r,[{key:"componentDidMount",value:function(){this.map=new Ge.a.Map({container:this.mapContainer.current,style:"mapbox://styles/pyatykhina/ckhz0q8o112of19qqobazgwvx",center:[30.315,59.94],zoom:13}),this.props.getCard(this.props.token),this.props.getAddress()}},{key:"componentDidUpdate",value:function(){this.props.coordinates&&this.props.coordinates.length>0&&He(this.map,this.props.coordinates)}},{key:"render",value:function(){var e=this.props,t=e.cardNumber,r=e.expiryDate,n=e.cardName,c=e.cvc;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Me,{}),Object(a.jsx)("div",{ref:this.mapContainer,"data-testid":"map",className:"mapContainer"}),this.state.makeOrder?Object(a.jsx)(Je,{makeOrder:this.makeOrder}):t&&r&&n&&c?Object(a.jsx)(Ze,{makeOrder:this.makeOrder}):Object(a.jsx)(Ue,{})]})}}]),r}(n.Component),ze=Object(d.b)((function(e){return{cardNumber:e.card.cardNumber,expiryDate:e.card.expiryDate,cardName:e.card.cardName,cvc:e.card.cvc,coordinates:e.route.route,token:e.auth.token}}),{getCard:S,getAddress:function(){return{type:N}}})(Ve),Pe=(r(78),function(e){var t=e.cardNumber,r=e.expiryDate,c=e.cardName,s=e.cvc,o=e.token,u=e.updateCardData,l=e.useDispatchHook,p=(void 0===l?d.c:l)(),m=Object(Ce.a)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:{cardNumber:t,expiryDate:r,cardName:c,cvc:s}}),j=m.register,b=m.handleSubmit,h=m.errors,f=m.reset;Object(n.useEffect)((function(){f({cardNumber:t,expiryDate:r,cardName:c,cvc:s})}),[f,t,r,c,s]);return Object(a.jsxs)("form",{onSubmit:b((function(e){var t=e.cardNumber,r=e.expiryDate,a=e.cardName,n=e.cvc;p(function(e,t,r,a,n){return{type:O,payload:{cardNumber:e,expiryDate:t,cardName:r,cvc:a,token:n}}}(t,r,a,n,o)),u(!0)})),className:"profile",children:[Object(a.jsxs)("div",{className:"profile__subforms",children:[Object(a.jsxs)("div",{className:"profile__subforms-item",children:[Object(a.jsx)(i.MCIcon,{className:"mastercard-icon"}),Object(a.jsxs)(Se.a,{className:"profile__label",children:["\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b:",Object(a.jsx)(De.a,{inputRef:j({required:{value:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"},minLength:{value:19,message:"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 16 \u0446\u0438\u0444\u0440"}}),onChange:function(e){var t=e.target.value;e.target.value=function(e){var t;return(null===(t=e.replace(/\s/g,"").replace(/[^\d]/g,"").match(/.{1,4}/g))||void 0===t?void 0:t.join(" ").substr(0,19))||""}(t)},className:"profile__input",placeholder:"0000 0000 0000 0000",type:"text",name:"cardNumber"}),h.cardNumber&&Object(a.jsx)("p",{className:"form-error",children:h.cardNumber.message})]}),Object(a.jsxs)(Se.a,{className:"profile__label",style:{width:"40%"},children:["\u0421\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f:",Object(a.jsx)(De.a,{inputRef:j({required:{value:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}}),onChange:function(e){var t=e.target.value;e.target.value=function(e){var t;return(null===(t=e.replace(/\s/g,"").replace(/[^\d]/g,"").replace(/\//g,"").match(/.{1,2}/g))||void 0===t?void 0:t.join("/").substr(0,5))||""}(t)},className:"profile__input",placeholder:"12/20",type:"text",name:"expiryDate"}),h.expiryDate&&Object(a.jsx)("p",{className:"form-error",children:h.expiryDate.message})]})]}),Object(a.jsxs)("div",{className:"profile__subforms-item",children:[Object(a.jsxs)(Se.a,{className:"profile__label",children:["\u0418\u043c\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430:",Object(a.jsx)(De.a,{inputRef:j({required:{value:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}}),onChange:function(e){var t=e.target.value;e.target.value=function(e){return e.replace(/[^ a-zA-Z]/g,"").replace(/[a-z]/g,(function(e){return e.toUpperCase()}))||""}(t)},className:"profile__input",placeholder:"USER NAME",type:"text",name:"cardName"}),h.cardName&&Object(a.jsx)("p",{className:"form-error",children:h.cardName.message})]}),Object(a.jsxs)(Se.a,{className:"profile__label",style:{width:"40%"},children:["CVC:",Object(a.jsx)(De.a,{inputRef:j({required:{value:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"},minLength:{value:3,message:"CVC \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u0442\u0440\u0435\u0445 \u0446\u0438\u0444\u0440"}}),onChange:function(e){var t=e.target.value;e.target.value=function(e){return e.replace(/\s/g,"").replace(/[^\d]/g,"").substr(0,3)||""}(t)},className:"profile__input",placeholder:"***",type:"text",name:"cvc"}),h.cvc&&Object(a.jsx)("p",{className:"form-error",children:h.cvc.message})]})]})]}),Object(a.jsx)("button",{type:"submit",className:"profile__button",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})}),We=(r(79),function(e){Object(ge.a)(r,e);var t=Object(Ne.a)(r);function r(){return Object(xe.a)(this,r),t.apply(this,arguments)}return Object(ve.a)(r,[{key:"render",value:function(){return Object(a.jsxs)("form",{className:"form gotomap",children:[Object(a.jsx)("h3",{className:"gotomap__title",children:"\u041f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"}),Object(a.jsx)("h4",{className:"gotomap__subtitle",children:"\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438."}),Object(a.jsx)(l.b,{to:"/map",className:"gotomap__button-link",children:Object(a.jsx)("button",{className:"gotomap__button",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u0430\u0440\u0442\u0435"})})]})}}]),r}(n.Component)),Xe=function(e){Object(ge.a)(r,e);var t=Object(Ne.a)(r);function r(){var e;Object(xe.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={updateCardData:!1},e.updateCardData=function(t){!0===t&&e.setState({updateCardData:t})},e}return Object(ve.a)(r,[{key:"componentDidMount",value:function(){this.props.getCard(this.props.token)}},{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Me,{}),this.state.updateCardData?Object(a.jsx)(We,{}):Object(a.jsxs)("div",{className:"form profile-form",children:[Object(a.jsx)("h2",{style:{marginBottom:"10px"},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b",Object(a.jsx)(Pe,Object(ye.a)({updateCardData:this.updateCardData},this.props))]})]})}}]),r}(n.Component),$e=Object(d.b)((function(e){return{token:e.auth.token,cardNumber:e.card.cardNumber,expiryDate:e.card.expiryDate,cardName:e.card.cardName,cvc:e.card.cvc}}),{getCard:S})(Xe),Ke=Object(d.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}),{logIn:w,logOut:C})((function(e){var t=e.component,r=e.isLoggedIn,n=Object(_e.a)(e,["component","isLoggedIn"]);return Object(a.jsx)(ke.b,Object(ye.a)(Object(ye.a)({},n),{},{render:function(e){return r?Object(a.jsx)(t,Object(ye.a)({},e)):Object(a.jsx)(ke.a,{to:"/"})}}))})),Ye=function(e){Object(ge.a)(r,e);var t=Object(Ne.a)(r);function r(){return Object(xe.a)(this,r),t.apply(this,arguments)}return Object(ve.a)(r,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"wrapper",children:Object(a.jsxs)("main",{children:[Object(a.jsx)("img",{src:we,alt:"Logo",className:"logo"}),Object(a.jsx)("section",{children:Object(a.jsxs)(ke.d,{children:[Object(a.jsx)(ke.b,{path:"/",exact:!0,component:Ee}),Object(a.jsx)(ke.b,{path:"/checkin",component:Ae}),Object(a.jsx)(Ke,{path:"/map",component:ze}),Object(a.jsx)(Ke,{path:"/profile",component:$e}),Object(a.jsx)(ke.a,{from:"*",to:"/"})]})})]})})}}]),r}(n.Component),Qe=Object(d.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}))(Ye);o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(u.a,{theme:i.theme,children:Object(a.jsx)(l.a,{children:Object(a.jsx)(d.a,{store:Oe,children:Object(a.jsx)(Qe,{})})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.a1cf810b.chunk.js.map