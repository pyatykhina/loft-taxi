(this["webpackJsonploft-taxi"]=this["webpackJsonploft-taxi"]||[]).push([[0],{69:function(e,t,r){},70:function(e,t,r){},73:function(e,t,r){},74:function(e,t,r){},75:function(e,t,r){},76:function(e,t,r){},77:function(e,t,r){},78:function(e,t,r){},79:function(e,t,r){},80:function(e,t,r){},81:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(35),s=r.n(c),o=r(28),i=r(97),u=r(18),l=r(9),d=r(24),p="LOG_IN",m="LOG_IN_ERROR",j="LOG_OUT",b="AUTHENTICATE",h="CHECKIN",f="SET_CARD",O="SET_CARD_SUCCESS",x="GET_CARD",v="GET_CARD_SUCCESS",g="GET_ADDRESS",N="GET_ADDRESS_SUCCESS",y="GET_ROUTE",_="GET_ROUTE_SUCCESS",k=function(e){return{type:p,payload:e}},w=function(){return{type:j}},C=function(e){return{type:x,payload:{token:e}}},S=function(e){return{type:v,payload:{cardNumber:e.cardNumber,expiryDate:e.expiryDate,cardName:e.cardName,cvc:e.cvc}}},D=function(e){return{type:N,payload:{addresses:e.addresses}}},I=function(e){return{type:_,payload:{route:e}}},L={isLoggedIn:!!window.localStorage.getItem("state")&&JSON.parse(window.localStorage.getItem("state")).isLoggedIn,token:window.localStorage.getItem("state")?JSON.parse(window.localStorage.getItem("state")).token:""},E={cardNumber:"",expiryDate:"",cardName:"",cvc:""},R={addresses:[]},T={route:[]},A=Object(d.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return window.localStorage.setItem("state",JSON.stringify({isLoggedIn:!0,token:t.payload})),{isLoggedIn:!0,token:t.payload,error:""};case m:return{isLoggedIn:!1,token:"",error:t.payload};case j:return window.localStorage.removeItem("state"),{isLoggedIn:!1,token:"",error:""};default:return e}},card:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return e;case v:return{cardNumber:t.payload.cardNumber,expiryDate:t.payload.expiryDate,cardName:t.payload.cardName,cvc:t.payload.cvc};case j:return{cardNumber:"",expiryDate:"",cardName:"",cvc:""};default:return e}},addresses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return{addresses:t.payload.addresses};case j:return{addresses:[]};default:return e}},route:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{route:t.payload.route};case j:return{route:[]};default:return e}}}),q=r(58),G=r(4),F=r.n(G),M=r(8),U=r(17),J=function(){var e=Object(U.a)(F.a.mark((function e(t,r){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/auth",{method:"POST",body:JSON.stringify({email:t,password:r}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(U.a)(F.a.mark((function e(t,r,a,n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/register",{method:"POST",body:JSON.stringify({email:t,password:n,name:r,surname:a}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e.token})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(U.a)(F.a.mark((function e(t,r,a,n,c){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/card",{method:"POST",body:JSON.stringify({cardNumber:t,expiryDate:r,cardName:a,cvc:n,token:c}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e.success})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,a,n,c){return e.apply(this,arguments)}}(),H=function(){var e=Object(U.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/card?token=".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(U.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/addressList").then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(U.a)(F.a.mark((function e(t,r){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://loft-taxi.glitch.me/route?address1=".concat(t,"&address2=").concat(r)).then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),P=F.a.mark(X),W=F.a.mark($);function X(e){var t,r,a,n;return F.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.email,a=t.password,c.next=3,Object(M.a)(J,r,a);case 3:if(!(n=c.sent).token){c.next=9;break}return c.next=7,Object(M.b)(k(n.token));case 7:c.next=11;break;case 9:return c.next=11,Object(M.b)((s=n.error,{type:m,payload:s}));case 11:case"end":return c.stop()}var s}),P)}function $(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.c)(b,X);case 2:case"end":return e.stop()}}),W)}var K=F.a.mark(Q),Y=F.a.mark(ee);function Q(e){var t,r,a,n,c,s;return F.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.email,a=t.firstName,n=t.lastName,c=t.password,o.next=3,Object(M.a)(B,r,a,n,c);case 3:if(!(s=o.sent)){o.next=7;break}return o.next=7,Object(M.b)(k(s));case 7:case"end":return o.stop()}}),K)}function ee(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.c)(h,Q);case 2:case"end":return e.stop()}}),Y)}var te=F.a.mark(ne),re=F.a.mark(ce),ae=F.a.mark(se);function ne(e){var t,r,a,n,c,s;return F.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.cardNumber,a=t.expiryDate,n=t.cardName,c=t.cvc,s=t.token,o.next=3,Object(M.a)(Z,r,a,n,c,s);case 3:if(!o.sent){o.next=9;break}return o.next=7,Object(M.b)({type:O});case 7:return o.next=9,Object(M.b)(C(s));case 9:case"end":return o.stop()}}),te)}function ce(e){var t,r;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.token,a.next=3,Object(M.a)(H,t);case 3:if(!(r=a.sent)){a.next=7;break}return a.next=7,Object(M.b)(S(r));case 7:case"end":return a.stop()}}),re)}function se(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.c)(f,ne);case 2:return e.next=4,Object(M.c)(x,ce);case 4:case"end":return e.stop()}}),ae)}var oe=F.a.mark(ue),ie=F.a.mark(le);function ue(e){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.a)(V);case 2:if(!(t=e.sent)){e.next=6;break}return e.next=6,Object(M.b)(D(t));case 6:case"end":return e.stop()}}),oe)}function le(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.c)(g,ue);case 2:case"end":return e.stop()}}),ie)}var de=F.a.mark(me),pe=F.a.mark(je);function me(e){var t,r,a,n;return F.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.address1,a=t.address2,c.next=3,Object(M.a)(z,r,a);case 3:if(!(n=c.sent)){c.next=7;break}return c.next=7,Object(M.b)(I(n));case 7:case"end":return c.stop()}}),de)}function je(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.c)(y,me);case 2:case"end":return e.stop()}}),pe)}var be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,he=Object(q.a)(),fe=Object(d.e)(A,be(Object(d.a)(he)));he.run($),he.run(ee),he.run(se),he.run(le),he.run(je);var Oe=r(11),xe=r(12),ve=r(14),ge=r(13),Ne=r(31),ye=r(59),_e=r(10),ke=(r(69),r.p+"static/media/logo.9f1f5bc1.svg"),we=(r(70),r(30)),Ce=r(99),Se=r(98),De=r(1),Ie=function(e){var t=e.useDispatchHook,r=(void 0===t?l.c:t)(),a=Object(we.a)({mode:"onBlur",reValidateMode:"onBlur"}),n=a.register,c=a.handleSubmit,s=a.errors;return Object(De.jsxs)("form",{onSubmit:c((function(e){var t=e.email,a=e.password;r(function(e,t){return{type:b,payload:{email:e,password:t}}}(t,a))})),className:"login",children:[Object(De.jsxs)(Ce.a,{className:"login__label",children:["\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",Object(De.jsx)(Se.a,{inputRef:n({required:{value:!0,message:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 email"}}),className:"login__input",type:"text",name:"email"}),s.email&&Object(De.jsx)("p",{className:"form-error",children:s.email.message})]}),Object(De.jsxs)(Ce.a,{className:"login__label",children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(De.jsx)(Se.a,{inputRef:n({required:!0}),className:"login__input",type:"password",name:"password"}),s.password&&Object(De.jsx)("p",{className:"form-error",children:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d"})]}),Object(De.jsx)("button",{type:"submit",className:"login__button",children:"\u0412\u043e\u0439\u0442\u0438"})]})},Le=function(e){Object(ve.a)(r,e);var t=Object(ge.a)(r);function r(){return Object(Oe.a)(this,r),t.apply(this,arguments)}return Object(xe.a)(r,[{key:"render",value:function(){return Object(De.jsxs)("div",{className:"form login-form",children:[this.props.isLoggedIn&&Object(De.jsx)(_e.a,{to:"/map"}),Object(De.jsx)("h2",{children:"\u0412\u043e\u0439\u0442\u0438"}),"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?  ",Object(De.jsx)(u.b,{to:"/checkin",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c"}),this.props.error&&Object(De.jsx)("p",{className:"form-error",style:{marginTop:"15px",marginBottom:"-20px"},children:this.props.error}),Object(De.jsx)(Ie,{})]})}}]),r}(a.Component),Ee=Object(l.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,error:e.auth.error}}),{})(Le),Re=(r(73),function(e){var t=e.useDispatchHook,r=(void 0===t?l.c:t)(),a=Object(we.a)({mode:"onBlur",reValidateMode:"onBlur"}),n=a.register,c=a.handleSubmit,s=a.errors;return Object(De.jsxs)("form",{onSubmit:c((function(e){var t=e.email,a=e.firstName,n=e.lastName,c=e.password;r(function(e,t,r,a){return{type:h,payload:{email:e,firstName:t,lastName:r,password:a}}}(t,a,n,c))})),className:"checkin",children:[Object(De.jsxs)(Ce.a,{className:"checkin__label",children:["\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b",Object(De.jsx)(Se.a,{inputRef:n({required:{value:!0,message:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 email"}}),className:"checkin__input",type:"text",name:"email"}),s.email&&Object(De.jsx)("p",{className:"form-error",children:s.email.message})]}),Object(De.jsxs)("div",{className:"inlineInputs",children:[Object(De.jsxs)(Ce.a,{className:"checkin__label",style:{width:"48%"},children:["\u0418\u043c\u044f",Object(De.jsx)(Se.a,{inputRef:n({required:!0}),className:"checkin__input",type:"text",name:"firstName"}),s.firstName&&Object(De.jsx)("p",{className:"form-error",children:"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"})]}),Object(De.jsxs)(Ce.a,{className:"checkin__label",style:{width:"48%"},children:["\u0424\u0430\u043c\u0438\u043b\u0438\u044f",Object(De.jsx)(Se.a,{inputRef:n({required:!0}),className:"checkin__input",type:"text",name:"lastName"}),s.lastName&&Object(De.jsx)("p",{className:"form-error",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430"})]})]}),Object(De.jsxs)(Ce.a,{className:"checkin__label",children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(De.jsx)(Se.a,{inputRef:n({required:!0}),className:"checkin__input",type:"password",name:"password"}),s.password&&Object(De.jsx)("p",{className:"form-error",children:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d"})]}),Object(De.jsx)("button",{type:"submit",className:"checkin__button",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})}),Te=function(e){Object(ve.a)(r,e);var t=Object(ge.a)(r);function r(){return Object(Oe.a)(this,r),t.apply(this,arguments)}return Object(xe.a)(r,[{key:"render",value:function(){return Object(De.jsxs)("div",{className:"form checkin-form",children:[this.props.isLoggedIn&&Object(De.jsx)(_e.a,{to:"/map"}),Object(De.jsx)("h2",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d?  ",Object(De.jsx)(u.b,{to:"/",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(De.jsx)(Re,{})]})}}]),r}(a.Component),Ae=Object(l.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}),{})(Te),qe=r(49),Ge=r.n(qe),Fe=(r(74),r(75),function(e){Object(ve.a)(r,e);var t=Object(ge.a)(r);function r(){var e;Object(Oe.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).unauthenticate=function(){e.props.logOut()},e}return Object(xe.a)(r,[{key:"render",value:function(){return Object(De.jsx)("header",{className:"header",children:Object(De.jsxs)("div",{className:"header__content",children:[Object(De.jsx)(o.Logo,{}),Object(De.jsx)("nav",{className:"header__nav",children:Object(De.jsxs)("ul",{className:"header__nav-list",children:[Object(De.jsx)("li",{className:"header__nav-list-item",children:Object(De.jsx)(u.b,{to:"/map",className:"header__nav-list-item-link",children:"\u041a\u0430\u0440\u0442\u0430"})}),Object(De.jsx)("li",{className:"header__nav-list-item",children:Object(De.jsx)(u.b,{to:"/profile",className:"header__nav-list-item-link",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(De.jsx)("li",{className:"header__nav-list-item",children:Object(De.jsx)(u.b,{to:"/",onClick:this.unauthenticate,className:"header__nav-list-item-link",children:"\u0412\u044b\u0439\u0442\u0438"})})]})})]})})}}]),r}(a.Component)),Me=Object(l.b)(null,{logOut:w})(Fe),Ue=(r(76),function(e){Object(ve.a)(r,e);var t=Object(ge.a)(r);function r(){return Object(Oe.a)(this,r),t.apply(this,arguments)}return Object(xe.a)(r,[{key:"render",value:function(){return Object(De.jsxs)("form",{className:"form nocard",children:[Object(De.jsx)("h3",{className:"nocard__title",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(De.jsx)("h4",{className:"nocard__subtitle",children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043a\u0430\u0440\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437."}),Object(De.jsx)(u.b,{to:"/profile",className:"nocard__button-link",children:Object(De.jsx)("button",{className:"nocard__button",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})})]})}}]),r}(a.Component)),Je=(r(77),function(e){Object(ve.a)(r,e);var t=Object(ge.a)(r);function r(){var e;Object(Oe.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).handleClick=function(t){t.preventDefault(),e.props.makeOrder(!1)},e}return Object(xe.a)(r,[{key:"render",value:function(){return Object(De.jsxs)("form",{className:"form nocard",children:[Object(De.jsx)("h3",{className:"nocard__title",children:"\u0417\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d"}),Object(De.jsx)("button",{className:"nocard__button",onClick:this.handleClick,children:"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"})]})}}]),r}(a.Component)),Be=(r(78),function(e){Object(ve.a)(r,e);var t=Object(ge.a)(r);function r(){var e;Object(Oe.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={src:"",dest:""},e.getRoute=function(t){t.preventDefault();var r=t.target,a=r.src,n=r.dest;e.props.getRoute(a.value,n.value),e.props.makeOrder(!0)},e}return Object(xe.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.src,a=t.dest,n=this.props.addresses;return Object(De.jsx)("div",{className:"form orderForm-form",children:Object(De.jsxs)("form",{onSubmit:this.getRoute,className:"orderForm",children:[Object(De.jsxs)(Ce.a,{className:"orderForm__label",children:["\u041e\u0442\u043a\u0443\u0434\u0430:",Object(De.jsxs)("select",{className:"orderForm__input",name:"src",value:r,onChange:function(t){return e.setState({src:t.target.value})},children:[Object(De.jsx)("option",{default:!0,disabled:!0},"default"),n.map((function(t){return t!==e.state.dest&&Object(De.jsx)("option",{children:t},t)}))]})]}),Object(De.jsxs)(Ce.a,{className:"orderForm__label",children:["\u041a\u0443\u0434\u0430:",Object(De.jsxs)("select",{className:"orderForm__input",name:"dest",value:a,onChange:function(t){return e.setState({dest:t.target.value})},children:[Object(De.jsx)("option",{default:!0,disabled:!0},"default"),n.map((function(t){return t!==e.state.src&&Object(De.jsx)("option",{children:t},t)}))]})]}),Object(De.jsx)("button",{type:"submit",className:"orderForm__button",children:"\u0412\u044b\u0437\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438"})]})})}}]),r}(a.Component)),Ze=Object(l.b)((function(e){return{addresses:e.addresses.addresses}}),{getRoute:function(e,t){return{type:y,payload:{address1:e,address2:t}}}})(Be);Ge.a.accessToken="pk.eyJ1IjoicHlhdHlraGluYSIsImEiOiJja2h6MDF6NjgybGZxMnBrejI0NWFpZ2tpIn0.AG-o6CiLmJ9ssaWs0tLSZA";var He=function(e,t){e.getLayer("route")&&e.removeLayer("route").removeSource("route"),t&&(e.flyTo({center:t[0],zoom:13}),e.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ffc617","line-width":8}}))},Ve=function(e){Object(ve.a)(r,e);var t=Object(ge.a)(r);function r(e){var a;return Object(Oe.a)(this,r),(a=t.call(this,e)).state={makeOrder:!1},a.makeOrder=function(e){a.setState({makeOrder:e}),!1===e&&He(a.map,[])},a.map=null,a.mapContainer=n.a.createRef(),a}return Object(xe.a)(r,[{key:"componentDidMount",value:function(){this.map=new Ge.a.Map({container:this.mapContainer.current,style:"mapbox://styles/pyatykhina/ckhz0q8o112of19qqobazgwvx",center:[30.315,59.94],zoom:13}),this.props.getCard(this.props.token),this.props.getAddress()}},{key:"componentDidUpdate",value:function(){this.props.coordinates&&this.props.coordinates.length>0&&He(this.map,this.props.coordinates)}},{key:"render",value:function(){var e=this.props,t=e.cardNumber,r=e.expiryDate,a=e.cardName,n=e.cvc;return Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Me,{}),Object(De.jsx)("div",{ref:this.mapContainer,"data-testid":"map",className:"mapContainer"}),this.state.makeOrder?Object(De.jsx)(Je,{makeOrder:this.makeOrder}):t&&r&&a&&n?Object(De.jsx)(Ze,{makeOrder:this.makeOrder}):Object(De.jsx)(Ue,{})]})}}]),r}(a.Component),ze=Object(l.b)((function(e){return{cardNumber:e.card.cardNumber,expiryDate:e.card.expiryDate,cardName:e.card.cardName,cvc:e.card.cvc,coordinates:e.route.route,token:e.auth.token}}),{getCard:C,getAddress:function(){return{type:g}}})(Ve),Pe=(r(79),function(e){var t=e.cardNumber,r=e.expiryDate,n=e.cardName,c=e.cvc,s=e.token,i=e.updateCardData,u=e.useDispatchHook,d=(void 0===u?l.c:u)(),p=Object(we.a)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:{cardNumber:t,expiryDate:r,cardName:n,cvc:c}}),m=p.register,j=p.handleSubmit,b=p.errors,h=p.reset;Object(a.useEffect)((function(){h({cardNumber:t,expiryDate:r,cardName:n,cvc:c})}),[h,t,r,n,c]);return Object(De.jsxs)("form",{onSubmit:j((function(e){var t=e.cardNumber,r=e.expiryDate,a=e.cardName,n=e.cvc;d(function(e,t,r,a,n){return{type:f,payload:{cardNumber:e,expiryDate:t,cardName:r,cvc:a,token:n}}}(t,r,a,n,s)),i(!0)})),className:"profile",children:[Object(De.jsxs)("div",{className:"profile__subforms",children:[Object(De.jsxs)("div",{className:"profile__subforms-item",children:[Object(De.jsx)(o.MCIcon,{className:"mastercard-icon"}),Object(De.jsxs)(Ce.a,{className:"profile__label",children:["\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b:",Object(De.jsx)(Se.a,{inputRef:m({required:{value:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"},minLength:{value:19,message:"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 16 \u0446\u0438\u0444\u0440"}}),onChange:function(e){var t=e.target.value;e.target.value=function(e){var t;return(null===(t=e.replace(/\s/g,"").replace(/[^\d]/g,"").match(/.{1,4}/g))||void 0===t?void 0:t.join(" ").substr(0,19))||""}(t)},className:"profile__input",placeholder:"0000 0000 0000 0000",type:"text",name:"cardNumber"}),b.cardNumber&&Object(De.jsx)("p",{className:"form-error",children:b.cardNumber.message})]}),Object(De.jsxs)(Ce.a,{className:"profile__label",style:{width:"40%"},children:["\u0421\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f:",Object(De.jsx)(Se.a,{inputRef:m({required:{value:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}}),onChange:function(e){var t=e.target.value;e.target.value=function(e){var t;return(null===(t=e.replace(/\s/g,"").replace(/[^\d]/g,"").replace(/\//g,"").match(/.{1,2}/g))||void 0===t?void 0:t.join("/").substr(0,5))||""}(t)},className:"profile__input",placeholder:"12/20",type:"text",name:"expiryDate"}),b.expiryDate&&Object(De.jsx)("p",{className:"form-error",children:b.expiryDate.message})]})]}),Object(De.jsxs)("div",{className:"profile__subforms-item",children:[Object(De.jsxs)(Ce.a,{className:"profile__label",children:["\u0418\u043c\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430:",Object(De.jsx)(Se.a,{inputRef:m({required:{value:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}}),onChange:function(e){var t=e.target.value;e.target.value=function(e){return e.replace(/[^ a-zA-Z]/g,"").replace(/[a-z]/g,(function(e){return e.toUpperCase()}))||""}(t)},className:"profile__input",placeholder:"USER NAME",type:"text",name:"cardName"}),b.cardName&&Object(De.jsx)("p",{className:"form-error",children:b.cardName.message})]}),Object(De.jsxs)(Ce.a,{className:"profile__label",style:{width:"40%"},children:["CVC:",Object(De.jsx)(Se.a,{inputRef:m({required:{value:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"},minLength:{value:3,message:"CVC \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u0442\u0440\u0435\u0445 \u0446\u0438\u0444\u0440"}}),onChange:function(e){var t=e.target.value;e.target.value=function(e){return e.replace(/\s/g,"").replace(/[^\d]/g,"").substr(0,3)||""}(t)},className:"profile__input",placeholder:"***",type:"text",name:"cvc"}),b.cvc&&Object(De.jsx)("p",{className:"form-error",children:b.cvc.message})]})]})]}),Object(De.jsx)("button",{type:"submit",className:"profile__button",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})}),We=(r(80),function(e){Object(ve.a)(r,e);var t=Object(ge.a)(r);function r(){return Object(Oe.a)(this,r),t.apply(this,arguments)}return Object(xe.a)(r,[{key:"render",value:function(){return Object(De.jsxs)("form",{className:"form gotomap",children:[Object(De.jsx)("h3",{className:"gotomap__title",children:"\u041f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"}),Object(De.jsx)("h4",{className:"gotomap__subtitle",children:"\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438."}),Object(De.jsx)(u.b,{to:"/map",className:"gotomap__button-link",children:Object(De.jsx)("button",{className:"gotomap__button",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u0430\u0440\u0442\u0435"})})]})}}]),r}(a.Component)),Xe=function(e){Object(ve.a)(r,e);var t=Object(ge.a)(r);function r(){var e;Object(Oe.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={updateCardData:!1},e.updateCardData=function(t){!0===t&&e.setState({updateCardData:t})},e}return Object(xe.a)(r,[{key:"componentDidMount",value:function(){this.props.getCard(this.props.token)}},{key:"render",value:function(){return Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Me,{}),this.state.updateCardData?Object(De.jsx)(We,{}):Object(De.jsxs)("div",{className:"form profile-form",children:[Object(De.jsx)("h2",{style:{marginBottom:"10px"},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b",Object(De.jsx)(Pe,Object(Ne.a)({updateCardData:this.updateCardData},this.props))]})]})}}]),r}(a.Component),$e=Object(l.b)((function(e){return{token:e.auth.token,cardNumber:e.card.cardNumber,expiryDate:e.card.expiryDate,cardName:e.card.cardName,cvc:e.card.cvc}}),{getCard:C})(Xe),Ke=Object(l.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}),{logIn:k,logOut:w})((function(e){var t=e.component,r=e.isLoggedIn,a=Object(ye.a)(e,["component","isLoggedIn"]);return Object(De.jsx)(_e.b,Object(Ne.a)(Object(Ne.a)({},a),{},{render:function(e){return r?Object(De.jsx)(t,Object(Ne.a)({},e)):Object(De.jsx)(_e.a,{to:"/"})}}))})),Ye=function(e){Object(ve.a)(r,e);var t=Object(ge.a)(r);function r(){return Object(Oe.a)(this,r),t.apply(this,arguments)}return Object(xe.a)(r,[{key:"render",value:function(){return Object(De.jsx)("div",{className:"wrapper",children:Object(De.jsxs)("main",{children:[Object(De.jsx)("img",{src:ke,alt:"Logo",className:"logo"}),Object(De.jsx)("section",{children:Object(De.jsxs)(_e.d,{children:[Object(De.jsx)(_e.b,{path:"/",exact:!0,component:Ee}),Object(De.jsx)(_e.b,{path:"/checkin",component:Ae}),Object(De.jsx)(Ke,{path:"/map",component:ze}),Object(De.jsx)(Ke,{path:"/profile",component:$e}),Object(De.jsx)(_e.a,{from:"*",to:"/"})]})})]})})}}]),r}(a.Component),Qe=Object(l.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}))(Ye);s.a.render(Object(De.jsx)(n.a.StrictMode,{children:Object(De.jsx)(i.a,{theme:o.theme,children:Object(De.jsx)(u.a,{children:Object(De.jsx)(l.a,{store:fe,children:Object(De.jsx)(Qe,{})})})})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.b5c5e10f.chunk.js.map